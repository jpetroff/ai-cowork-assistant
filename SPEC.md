# Specification

## App description

This is an app that works the same way as Claude Cowork. It contains projects that users can create.

Each project contains:

* chats with LLMs,
* artifacts generated by LLMs,
* uploaded files in the format of LlamaIndex document store and links to ChromaDB document embeddings generated for these files

## Routing and pages

Application pages located in ./src/pages and represent distinct screens where users manage application assets: chats, projects, uploaded files

When first opened, users can see setup screen that populates CONFIG table.

Then Projects page is opened to list all created projects with search, sort, delete options.

When clicking on a Project user lands on Project page. It contains:

* chat with LLM on the left
* chat selector and plus button to create new chat
* rich text editor on the right that displays last saved or selected artifact
  * when LLM replies with an artifact, it can be selected to view and edit in the editor

On top of every page besides starting page there is an app header with user initials or avatar. Clicking on avatar opens Settings modal that covers whole window.

## Implementation

App consists of:

* Tauri backend written in Rust: ./src-tauri
* Vite frontend -- Typescript, Tailwind, React: ./src
* Python sidecar that runs local Fast API: ./src-python
  * Fast API in Python implements:
    * LlamaIndex workflows that run actual LLM requests, contain system and other prompts that power agentic workflows,
    * Calls to local (or remote) ChromaDB instance that retrieves embeddings and performs vector search on documents
    * Local Crawl4AI for scraping web results into markdown format
    * DocumentStorage for all uploaded files to keep track of them and corresponding links to ChromaDB documents (one uploaded document may consist of several documents in ChromaDB: for example PDFs are split by page into several documents)

Each SQLite table is described via its schema using Prisma in ./prisma/schema.prisma file. Any update to schema should be followed by this command `bun run db:generate` to update Typescript types for frontend client.

Each SQLite table is created on application launch if it does not exist yet. The schema should match the one in ./prisma/schema.prisma file.

Full description of how to use db API is located in ./src/lib/db/README.md
